#!/usr/bin/env php
<?php

require_once __DIR__ . '/../vendor/autoload.php';

// Create the Application
$application = new Symfony\Component\Console\Application;

// Register commands
$application->add(
    new \MarkdownBlog\Console\GeneratePages(
        configDir: __DIR__ . '/../config/',
        templatesDir: __DIR__ . '/../template/',
        publicDir: __DIR__ . '/../public/',
        pagesConfigParser: new \MarkdownBlog\Parser\PagesConfigParser(
            yamlParser: new \MarkdownBlog\Parser\YamlParser()
        ),
        pageGenerator: new \MarkdownBlog\Generator\HtmlPageGenerator(
            markdownDir: __DIR__ . '/../markdown/',
            outputDir: __DIR__ . '/../public/',
            templateDir: __DIR__ . '/../template/',
            markdownToHtml: new \MarkdownBlog\Transformer\MarkdownToHtml(),
            fileLoader: new \MarkdownBlog\IO\FileLoader(),
            fileWriter: new \MarkdownBlog\IO\FileWriter(),
            pagesListGenerator: new \MarkdownBlog\Generator\PagesListGenerator()
        )
    )
);

// Run it
$application->run();
